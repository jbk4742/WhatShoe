<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        
        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCOE99wzbk-_nJFVrawrL2HSionuh9oaWE&callback=initMap">
        </script>
        <title>Blank App</title>
        <style type="text/css">
            html, body { height: 100%; margin: 0; padding: 0; }
            #map { height: 100%; }
        </style>
        <script type="text/javascript">

            function fnGetCurrentPosition() {
                if (navigator.geolocation)
                {
                    $("#latlng").html("");
                    $("#errormsg").html("");
                    navigator.geolocation.getCurrentPosition (function (pos)
                    {
                        lat = pos.coords.latitude;
                        lng = pos.coords.longitude;

                        $("#latlng").html("latitude : " + lat + "longitude :"+lng);

                        var mapOptions = {
                            zoom: 16,
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            center: new google.maps.LatLng(lat,lng)
                        };

                        map = new google.maps.Map(document.getElementById('map'),mapOptions);

                        var myIcon = new google.maps.MarkerImage('http://www.larva.re.kr/home/img/boximage3.png', null, null, null, new google.maps.Size(17,17));
                        var marker = new google.maps.Marker({
                            position: new google.maps.LatLng(lat,lng),
                            map: map,
                            draggable: false,
                            icon: myIcon
                        });
                        markers.push(marker);
                    },function(error)
                    {
                        switch(error.code)
                        {
                            case 1:
                                $("#errormsg").html("User denied the request for Geolocation.");
                                break;
                            case 2:
                                $("#errormsg").html("Location information is unavailable.");
                                break;
                            case 3:
                                $("#errormsg").html("The request to get user location timed out.");
                                break;
                            case 0:
                                $("#errormsg").html("An unknown error occurred.");
                                break;
                        }
                    });
                }
                else
                {
                    $("#errormsg").html("Geolocation is not supported by this browser.");
                }
            }

        </script>
    </head>
    <body>
        <div id="errormsg"></div>
        <div id="latlng"></div>
        <input type="button" value="GetCurrentPosition " onclick="Javascript:fnGetCurrentPosition();" />
        <div id="map" style="width:760px;height:400px;margin-top:20px;"></div>

    </body>
</html>
